{% extends "base.html" %}
{% set title = "Tugas 4 - Naive Bayes" %}
{% block content %}

<h2 class="text-center mb-4">ğŸ›ï¸ Naive Bayes (Prediksi Beli Konsumen)</h2>

<h5>Dataset</h5>
<div class="table-responsive">
    {{ df|safe }}
</div>

<hr>

<h5 class="mt-4 mb-3">ğŸ” Form Prediksi</h5>

<form method="POST">

    <div class="mb-3">
        <label class="form-label fw-semibold">Usia:</label>
        <select class="form-select" name="usia" required>
            <option value="Muda">Muda</option>
            <option value="Tengah">Tengah</option>
            <option value="Tua">Tua</option>
        </select>
    </div>

    <div class="mb-3">
        <label class="form-label fw-semibold">Penghasilan:</label>
        <select class="form-select" name="penghasilan" required>
            <option value="Rendah">Rendah</option>
            <option value="Sedang">Sedang</option>
            <option value="Tinggi">Tinggi</option>
        </select>
    </div>

    <div class="mb-3">
        <label class="form-label fw-semibold">Promo:</label>
        <select class="form-select" name="promo" required>
            <option value="Ya">Ya</option>
            <option value="Tidak">Tidak</option>
        </select>
    </div>

    <button type="submit" class="btn btn-primary w-100">Prediksi</button>
</form>

{% if show_result %}
<hr class="my-4">

<div class="card mx-auto mt-4" style="max-width: 600px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
    <div class="card-body text-center">
        <h4 class="card-title mb-3">ğŸ“ˆ Hasil Prediksi</h4>

        <p class="mb-2"><strong>Prediksi:</strong> <span class="badge bg-primary fs-5">{{ result }}</span></p>
        
        <h6 class="mt-3">ğŸ”¹ Detail Input:</h6>
        <ul class="list-group list-group-flush text-start">
            <li class="list-group-item">Usia: <strong>{{ usia }}</strong></li>
            <li class="list-group-item">Penghasilan: <strong>{{ penghasilan }}</strong></li>
            <li class="list-group-item">Promo: <strong>{{ promo }}</strong></li>
        </ul>
        
        {% if probability %}
        <p class="mt-3"><strong>Confidence:</strong> {{ (probability*100)|round(2) }}%</p>
        {% endif %}
        
        <p class="mt-2 text-muted" style="font-size: 0.9rem;">
            Hasil prediksi ini didasarkan pada algoritma Naive Bayes dengan memperhitungkan fitur-fitur di atas.
        </p>
    </div>
</div>
{% endif %}

{% endblock %}
